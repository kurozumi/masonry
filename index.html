<html>
<head>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://unpkg.com/masonry-layout@4.1/dist/masonry.pkgd.js"></script>
<script src="https://unpkg.com/imagesloaded@4.1/imagesloaded.pkgd.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.js"></script>
<script src="static/randomize.js"></script>
<script>
$(function(){
    var $container = $("#container");
    $container.imagesLoaded(function(){
        $container.randomize(".item").masonry({
            itemSelector: '.item',
            columnWidth: function(containerWidth){
                return containerWidth / 4;
            }(),
            isAnimated: true
        });
        $(".item img").addClass("not-loaded");
        $(".item img.not-loaded").lazyload({
            effect: "fadeIn",
            effect_speed: 1000,
            load: function(){
                $(this).removeClass("not-loaded");
                $container.masonry("reloadItems");
            }
        });
        $(".item img.not-loaded").trigger("scroll");
        $(".item").hover(
            function(){$(".description", this).stop().animate({"opacity": "1"}, {duration: "slow"})},
            function(){$(".description", this).stop().animate({"opacity": "0"}, {duration: "slow"})}
        );
    });
});
</script>
<style>
#container {
    width: 100%;
}
a {
    text-decoration: none;
}
div.item {
    width: 25%;
    height: auto;
    overflow: hidden;
    margin:0;
    position: relative;
}
div.item img {
    display: block;
    width: 100%;
    height: auto !important;
}
div.item .wrapper {
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    bottom: 0;
    left: 0;
}
div.item .title {
    opacity: 1;
    z-index: 2;
}
div.item .description {
    opacity: 0;
    z-index: 1;
    background: rgba(0,0,0,.6);
}
div.item .title h3,
div.item .description p {
    color: #fff;
    text-align: center;

}
div.item .title h3 {
    padding-top: 50%;
}
div.item .description p {
    padding-top: 70%;
}
</style>
</head>
<body>
<div id="container">
    <div href="#" class="item">
        <img src="https://placehold.jp/200x200.png" data-original="https://placehold.jp/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>サンクス</h3>
        </a>
        <div class="wrapper description">
            <p>英語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/cc5200/f7f7f7/200x200.png" data-original="https://placehold.jp/cc5200/f7f7f7/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>メルシー</h3>
        </a>
        <div class="wrapper description">
            <p>フランス語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/200x200.png" data-original="https://placehold.jp/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>サンクス</h3>
        </a>
        <div class="wrapper description">
            <p>英語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/cc5200/f7f7f7/200x200.png" data-original="https://placehold.jp/cc5200/f7f7f7/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>メルシー</h3>
        </a>
        <div class="wrapper description">
            <p>フランス語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/200x200.png" data-original="https://placehold.jp/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>サンクス</h3>
        </a>
        <div class="wrapper description">
            <p>英語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/cc5200/f7f7f7/200x200.png" data-original="https://placehold.jp/cc5200/f7f7f7/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>メルシー</h3>
        </a>
        <div class="wrapper description">
            <p>フランス語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/200x200.png" data-original="https://placehold.jp/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>サンクス</h3>
        </a>
        <div class="wrapper description">
            <p>英語</p>
        </div>
    </div>
    <div class="item">
        <img src="https://placehold.jp/cc5200/f7f7f7/200x200.png" data-original="https://placehold.jp/cc5200/f7f7f7/200x200.png" />
        <a href="#" class="wrapper title">
            <h3>メルシー</h3>
        </a>
        <div class="wrapper description">
            <p>フランス語</p>
        </div>
    </div>
</div>
</body>
</html>
